{"version":3,"file":"serviceService.js","sources":["services/serviceService.ts"],"sourceRoot":"/","sourcesContent":["import { Service, Category, User } from '../models';\r\n\r\nexport class ServiceService {\r\n  async createService(data: {\r\n    title: string;\r\n    description: string;\r\n    price: number;\r\n    categoryId: number;\r\n    imagePath?: string | null;\r\n  }) {\r\n    return await Service.create({\r\n      title: data.title,\r\n      description: data.description,\r\n      price: data.price,\r\n      categoryId: data.categoryId,\r\n      imagePath: data.imagePath || null,\r\n      isHidden: false,\r\n    });\r\n  }\r\n\r\n  async getAllServices(includeHidden: boolean) {\r\n    return await Service.findAll({\r\n      where: includeHidden ? {} : { isHidden: false },\r\n      include: [\r\n        {\r\n          model: Category,\r\n          as: 'category',\r\n          attributes: ['id', 'name'],\r\n        },\r\n      ],\r\n    });\r\n  }\r\n\r\n  async getServiceById(id: number) {\r\n    return await Service.findByPk(id);\r\n  }\r\n\r\n  async getServicesForDoctor(doctorId: number) {\r\n    const doctor = await User.findByPk(doctorId, {\r\n      include: {\r\n        model: Service,\r\n        as: 'services',\r\n        through: { attributes: [] },\r\n      },\r\n    });\r\n    return doctor?.services || null;\r\n  }\r\n\r\n  async updateService(id: number, updateData: {\r\n    title?: string;\r\n    description?: string;\r\n    price?: number;\r\n    categoryId?: number;\r\n    isHidden?: boolean;\r\n    imagePath?: string | null;\r\n  }) {\r\n    const service = await Service.findByPk(id);\r\n    if (!service) return null;\r\n\r\n    await service.update(updateData);\r\n    return service;\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA,sCAAoD;AAEpD,MAAa,cAAc;IACzB,KAAK,CAAC,aAAa,CAAC,IAMnB;QACC,OAAO,MAAM,gBAAO,CAAC,MAAM,CAAC;YAC1B,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,SAAS,EAAE,IAAI,CAAC,SAAS,IAAI,IAAI;YACjC,QAAQ,EAAE,KAAK;SAChB,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,aAAsB;QACzC,OAAO,MAAM,gBAAO,CAAC,OAAO,CAAC;YAC3B,KAAK,EAAE,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE;YAC/C,OAAO,EAAE;gBACP;oBACE,KAAK,EAAE,iBAAQ;oBACf,EAAE,EAAE,UAAU;oBACd,UAAU,EAAE,CAAC,IAAI,EAAE,MAAM,CAAC;iBAC3B;aACF;SACF,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,EAAU;QAC7B,OAAO,MAAM,gBAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;IACpC,CAAC;IAED,KAAK,CAAC,oBAAoB,CAAC,QAAgB;QACzC,MAAM,MAAM,GAAG,MAAM,aAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;YAC3C,OAAO,EAAE;gBACP,KAAK,EAAE,gBAAO;gBACd,EAAE,EAAE,UAAU;gBACd,OAAO,EAAE,EAAE,UAAU,EAAE,EAAE,EAAE;aAC5B;SACF,CAAC,CAAC;QACH,OAAO,MAAM,EAAE,QAAQ,IAAI,IAAI,CAAC;IAClC,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,EAAU,EAAE,UAO/B;QACC,MAAM,OAAO,GAAG,MAAM,gBAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAO;YAAE,OAAO,IAAI,CAAC;QAE1B,MAAM,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACjC,OAAO,OAAO,CAAC;IACjB,CAAC;CACF;AA5DD,wCA4DC","debug_id":"151c17a9-7065-5bac-994c-f5c2cb1757de"}