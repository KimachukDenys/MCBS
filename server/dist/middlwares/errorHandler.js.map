{"version":3,"file":"errorHandler.js","sources":["middlwares/errorHandler.ts"],"sourceRoot":"/","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport * as Sentry from '@sentry/node';\r\n\r\nexport const errorHandler = (\r\n  err: any,\r\n  _req: Request,\r\n  res: Response,\r\n  _next: NextFunction\r\n): void => {\r\n  console.error(err.stack);\r\n\r\n  Sentry.captureException(err);\r\n\r\n  if (err.message.startsWith('ValidationError')) {\r\n    res.status(400).json({ message: err.message.replace('ValidationError: ', '') });\r\n    return;\r\n  }\r\n  if (err.message.startsWith('ConflictError')) {\r\n    res.status(409).json({ message: err.message.replace('ConflictError: ', '') });\r\n    return;\r\n  }\r\n  if (err.message.startsWith('NotFoundError')) {\r\n    res.status(404).json({ message: err.message.replace('NotFoundError: ', '') });\r\n    return;\r\n  }\r\n  if (err.message.startsWith('AuthError')) {\r\n    res.status(400).json({ message: err.message.replace('AuthError: ', '') });\r\n    return;\r\n  }\r\n\r\n  res.status(err.status || 500).json({ message: err.message || 'Server error' });\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,qDAAuC;AAEhC,MAAM,YAAY,GAAG,CAC1B,GAAQ,EACR,IAAa,EACb,GAAa,EACb,KAAmB,EACb,EAAE;IACR,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;IAEzB,MAAM,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC;IAE7B,IAAI,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,iBAAiB,CAAC,EAAE,CAAC;QAC9C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,mBAAmB,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;QAChF,OAAO;IACT,CAAC;IACD,IAAI,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,eAAe,CAAC,EAAE,CAAC;QAC5C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9E,OAAO;IACT,CAAC;IACD,IAAI,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,eAAe,CAAC,EAAE,CAAC;QAC5C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,iBAAiB,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9E,OAAO;IACT,CAAC;IACD,IAAI,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC;QACxC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1E,OAAO;IACT,CAAC;IAED,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,IAAI,cAAc,EAAE,CAAC,CAAC;AACjF,CAAC,CAAC;AA5BW,QAAA,YAAY,gBA4BvB","debug_id":"115be52b-9ac9-5e1f-9f7e-b3432b64c8c8"}