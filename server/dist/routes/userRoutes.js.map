{"version":3,"file":"userRoutes.js","sources":["routes/userRoutes.ts"],"sourceRoot":"/","sourcesContent":["import express from 'express';\r\nimport { container } from '../di/container';\r\nimport { UserController } from '../controllers/userController';\r\nimport { DoctorController } from '../controllers/doctorController';\r\nimport { DoctorService } from '../services/doctorService';\r\nimport { authenticateToken, authorizeRole } from '../middlwares/auth';\r\nimport { uploadImage } from '../middlwares/upload';\r\n\r\nconst router = express.Router();\r\n\r\nconst asyncHandler =\r\n  (fn: any) => (req: any, res: any, next: any) =>\r\n    Promise.resolve(fn(req, res, next)).catch(next);\r\n\r\nconst userController = container.resolve(UserController);\r\n\r\nconst doctorService = new DoctorService();\r\nconst doctorController = new DoctorController(doctorService);\r\n\r\nrouter.post('/register', asyncHandler(userController.registerUser));\r\nrouter.post('/login', asyncHandler(userController.loginUser));\r\nrouter.get ('/profile/:id', authenticateToken, asyncHandler(userController.getUserProfile));\r\nrouter.put ('/profile/:id',authenticateToken, uploadImage, asyncHandler(userController.editUserProfile));\r\n\r\nrouter.get('/doctors', doctorController.getAllDoctors);\r\nrouter.get('/doctor/profile/:doctorId', doctorController.getDoctorProfile);\r\nrouter.post('/doctor/profile/create', authenticateToken, authorizeRole(['doctor']), doctorController.createDoctorProfile);\r\nrouter.put('/doctor/profile/edit/:userId', authenticateToken, authorizeRole(['doctor']), doctorController.updateDoctorProfile);\r\n\r\nexport default router;\r\n"],"names":[],"mappings":";;;;;;;AAAA,sDAA8B;AAC9B,+CAA4C;AAC5C,kEAA+D;AAC/D,sEAAmE;AACnE,6DAA0D;AAC1D,6CAAsE;AACtE,iDAAmD;AAEnD,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM,YAAY,GAChB,CAAC,EAAO,EAAE,EAAE,CAAC,CAAC,GAAQ,EAAE,GAAQ,EAAE,IAAS,EAAE,EAAE,CAC7C,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAEpD,MAAM,cAAc,GAAG,qBAAS,CAAC,OAAO,CAAC,+BAAc,CAAC,CAAC;AAEzD,MAAM,aAAa,GAAG,IAAI,6BAAa,EAAE,CAAC;AAC1C,MAAM,gBAAgB,GAAG,IAAI,mCAAgB,CAAC,aAAa,CAAC,CAAC;AAE7D,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,YAAY,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;AACpE,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,YAAY,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;AAC9D,MAAM,CAAC,GAAG,CAAE,cAAc,EAAE,wBAAiB,EAAE,YAAY,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;AAC5F,MAAM,CAAC,GAAG,CAAE,cAAc,EAAC,wBAAiB,EAAE,oBAAW,EAAE,YAAY,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;AAEzG,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,gBAAgB,CAAC,aAAa,CAAC,CAAC;AACvD,MAAM,CAAC,GAAG,CAAC,2BAA2B,EAAE,gBAAgB,CAAC,gBAAgB,CAAC,CAAC;AAC3E,MAAM,CAAC,IAAI,CAAC,wBAAwB,EAAE,wBAAiB,EAAE,IAAA,oBAAa,EAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,gBAAgB,CAAC,mBAAmB,CAAC,CAAC;AAC1H,MAAM,CAAC,GAAG,CAAC,8BAA8B,EAAE,wBAAiB,EAAE,IAAA,oBAAa,EAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,gBAAgB,CAAC,mBAAmB,CAAC,CAAC;AAE/H,kBAAe,MAAM,CAAC","debug_id":"b9e80fd4-c064-5317-8322-49dc803774e2"}