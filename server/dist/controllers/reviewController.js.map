{"version":3,"file":"reviewController.js","sources":["controllers/reviewController.ts"],"sourceRoot":"/","sourcesContent":["import { Request, Response, NextFunction } from 'express';\r\nimport { ReviewService } from '../services/reviewService';\r\n\r\nexport class ReviewController {\r\n  constructor(private reviewService: ReviewService) {}\r\n\r\n  getUserReviews = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      const userId = +req.params.userId;\r\n      const reviews = await this.reviewService.getUserReviews(userId);\r\n      res.json(reviews);\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  createReview = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      const { appointmentId, rating, comment, userId } = req.body;\r\n      const review = await this.reviewService.createReview({ appointmentId, userId, rating, comment });\r\n      res.status(201).json(review);\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  updateReview = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      const id = +req.params.id;\r\n      const { rating, comment } = req.body;\r\n      const review = await this.reviewService.updateReview(id, { rating, comment });\r\n      res.status(200).json(review);\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  deleteReview = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      const id = +req.params.id;\r\n      await this.reviewService.deleteReview(id);\r\n      res.status(204).send();\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getDoctorReviews = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      const doctorId = +req.params.doctorId;\r\n      const reviews = await this.reviewService.getDoctorReviews(doctorId);\r\n      res.json(reviews);\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n\r\n  getServiceReviews = async (req: Request, res: Response, next: NextFunction) => {\r\n    try {\r\n      const serviceId = +req.params.serviceId;\r\n      const reviews = await this.reviewService.getServiceReviews(serviceId);\r\n      res.json(reviews);\r\n    } catch (error) {\r\n      next(error);\r\n    }\r\n  };\r\n}"],"names":[],"mappings":"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","debug_id":"46be4e8d-8bc6-5d0f-bbb7-6ef59dd57cfb"}